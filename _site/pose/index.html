<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Representations of Position, Orientation and Motion</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Crowd-sourced notes for Stanford's CS336: Robot Perception and Decision-Making.">
    <link rel="canonical" href="http://localhost:4000/pose/">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- Google fonts -->
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300' rel='stylesheet' type='text/css'>

    <!-- Google tracking -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46895817-2', 'auto');
      ga('send', 'pageview');

    </script>
    
</head>


    <body>

    <header class="site-header">

  <div class="wrap title-wrap">
    <a class="site-title" href="/">CS336 Robot Perception and Decision-Making</a>
  </div>

</header>


    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>Representations of Position, Orientation and Motion</h1>
  </header>

  <article class="post-content">
  <p>Table of Contents:</p>

<ul>
  <li><a href="#intro">Introduction</a></li>
  <li><a href="#conv">Conventions</a></li>
  <li><a href="#trig">Trig Review</a></li>
  <li><a href="#planar">Planar Rotations</a></li>
  <li><a href="#three-dim">Orientation in 3D</a>
    <ul>
      <li><a href="#rotm">Rotation Matrices</a></li>
      <li><a href="#quater">Quaternions</a></li>
      <li><a href="#axisang">Axis-Angles</a></li>
    </ul>
  </li>
  <li><a href="#summary">Summary</a></li>
</ul>

<p><a name="intro"></a></p>
<h2 id="introduction">Introduction</h2>

<blockquote>
  <p>The heart of robotics is motion. (Matt Mason)</p>
</blockquote>

<p>Robotics involves perceiving, predicting, creating and controlling motion. Motion is the change in position over time. Thus, we need to be able to represent the position and orientation of a rigid body in 3D space to be able to do these things.</p>

<p><a name="conv"></a></p>
<h2 id="notation-and-conventions">Notation and Conventions</h2>

<p>In this course, we’ll use the following notation:</p>

<ul>
  <li>$A \in \mathcal{R}^{m \times n}$: a capital letter will denote a matrix with m rows and n columns. The entries of $A$ will be real-valued.</li>
  <li>$x \in \mathcal{R}^{n}$: a small letter will denote a vector with n entries.</li>
  <li>$\hat{x}$: vectors with a hat will denote unit vectors, i.e. vectors of length 1.</li>
</ul>

<p>All vectors are to be considered column vectors, i.e.</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
  x &= \begin{bmatrix}
          x_{1} \\
          x_{2} \\
          \vdots \\
          x_{n}
        \end{bmatrix}
\end{align} %]]></script>

<p>If we want to explicitly denote row vectors, we will use the notation $x^T = [x_1, \dots, x_n]$.</p>

<p>Because we work with column vectors, multiplications involving rotation and general manipulation of these vectors will be represented as pre-multiplications, e.g. $y = Rx$.</p>

<p>We’ll also be using a right-hand coordinate system. That is the x, y, and z axes of our frames are aligned with the index finger, middle finger, and thumb of the right hand, respectively. Or mathematically, that $\widehat{x} \times \widehat{y} = +\widehat{z}$.</p>

<div class="fig figcenter">
  <img src="/assets/right-hand-rule.png" style="width:200px;" />
</div>

<p>Positive rotation in a right-hand system is obtained using the “right-hand rule”: by aligning the thumb with the axis of rotation in the positive direction, the curl of the fingers represents a positive motion from the first axis to the second axis. In a right-hand coordinate system, this implies that a positive rotation about the z-axis when viewed from above is counter-clockwise.</p>

<!-- This also means that for any rotation matrix we consider, $\operatorname{det}R = +1$. -->

<p><a name="trig"></a></p>
<h2 id="trigonometry-review">Trigonometry Review</h2>

<p>In this section, we’ll be reviewing a few trig properties as well as examples of how to derive them. The purpose isn’t to cover them all, but to get you acclimated to the math for future sections.</p>

<p>A handy mnemonic to remember the cosine, sine and tangent relationships in a right triangle is “soh-cah-toa”.</p>

<div class="fig figcenter">
  <img src="/assets/sohcahtoa.png" style="width:250px;" />
</div>

<p>That is, $\sin\theta = \frac{\textbf{o}\text{pposite}}{\textbf{h}\text{ypotenuse}}$, $\cos\theta = \frac{\textbf{a}\text{djacent}}{\textbf{h}\text{ypotenuse}}$ and $\tan\theta = \frac{\textbf{o}\text{pposite}}{\textbf{a}\text{djacent}}$.</p>

<p>We can apply these definitions in a unit circle to derive useful properties of these functions.</p>

<div class="fig figcenter">
  <img src="/assets/unit-circle.jpg" style="width:500px;" />
</div>

<p>In the figure above, let OP be a radius of the circle with $\angle POA = \theta$. From the definition of sine and cosine, we have that $\cos \theta = OA$ and  $\sin \theta = AP$ since $OP = 1$. Thus, the coordinates of the point P are $(\cos \theta, \sin \theta)$. Similarly, we can see that the point drawn at $-\theta$ has the same $x$ value as P but the negative of its $y$ value. This means that we can write an expression relating the cosine/sine of an angle with its negative:</p>

<script type="math/tex; mode=display">\cos (- \theta) = \cos \theta \\
\sin (- \theta) = - \sin \theta</script>

<p>In fact, cosine is an even function and sine is an odd function. Next, consider the point Q, drawn with an angle of $\theta + 90$ from the origin. In the right triangle QPO, the angle Q is equal to $\theta$ and O equal to $90 - \theta$. This means that QBO and OAP are similar triangles. As such,</p>

<script type="math/tex; mode=display">\cos(90 - \theta) = OB = AP = \sin \theta \\
\sin(90 - \theta) = QB = OA = \cos \theta</script>

<p>from which we can derive the expressions for $90 + \theta$:</p>

<script type="math/tex; mode=display">\cos(90 + \theta) = \cos(90 - (-\theta)) = \sin(-\theta) = - \sin \theta \\
\sin(90 + \theta) = \sin(90 - (-\theta)) = \cos(-\theta) = \cos \theta</script>

<p>For more formulas, check out the following <a href="http://tutorial.math.lamar.edu/pdf/trig_cheat_sheet.pdf">cheatsheat</a>.</p>

<p><a name="planar"></a></p>
<h2 id="planar-rotations">Planar Rotations</h2>

<p>Suppose we are given two coordinates frames: a stationary frame of reference $s$ and a body frame $b$. The coordinate frame $b$ is obtained by rotating the frame $s$ counterclockwise by $\theta$ about the origin. We would like to express the unit vectors of the rotated frame $b$ with respect to $s$.</p>

<div class="fig figcenter">
  <img src="/assets/planar-rot.jpg" style="width:500px;" />
</div>

<p>Because we are dealing with unit-vectors, the math will be equivalent to working in a unit-circle. In fact, $\widehat{x}_b$ will correspond to a rotation by $\theta$ in a unit-circle and $\widehat{y}_b$ to a rotation by $90+ \theta$. This allows us to write the following system of equations, based on the trig properties we derived in the previous section:</p>

<script type="math/tex; mode=display">\widehat{x}_b = \cos \theta \ \widehat{x}_s + \sin \theta \ \widehat{y}_s \\
\widehat{y}_b = -\sin \theta \ \widehat{x}_s + \cos \theta \ \widehat{y}_s</script>

<p>In matrix form:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{bmatrix}
    \widehat{x}_b \\
    \widehat{y}_b
  \end{bmatrix}
=
  \begin{bmatrix}
    \cos \theta && \sin \theta \\
    - \sin \theta && \cos \theta \\
  \end{bmatrix}
  \cdot
  \begin{bmatrix}
    \widehat{x}_s \\
    \widehat{y}_s
  \end{bmatrix} %]]></script>

<p>Now consider any point $p$ in both frames. We can look at its coordinates with respect to $s$: $p = p_x \widehat{x}_s + p_y \widehat{y}_s$, or with respect to $b$: $p = p’_x \widehat{x}_b + p’_y \widehat{y}_b$. Again, in matrix form:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
  \begin{bmatrix}
    \widehat{x}_s && \widehat{y}_s
  \end{bmatrix}

  \begin{bmatrix}
    p_x \\
    p_y \\
  \end{bmatrix}
&=
  \begin{bmatrix}
    \widehat{x}_b && \widehat{y}_b
  \end{bmatrix}

  \begin{bmatrix}
    p'_x \\
    p'_y \\
  \end{bmatrix} \\
  &=
    \bigg ( \begin{bmatrix}
    \cos \theta && \sin \theta \\
    - \sin \theta && \cos \theta \\
  \end{bmatrix}
  \cdot
  \begin{bmatrix}
    \widehat{x}_s \\
    \widehat{y}_s
  \end{bmatrix} \bigg )^T
  \begin{bmatrix}
    p'_x \\
    p'_y \\
  \end{bmatrix} \\
  &=
  \begin{bmatrix}
    \widehat{x}_s && \widehat{y}_s
  \end{bmatrix}
\begin{bmatrix}
    \cos \theta && -\sin \theta \\
    \sin \theta && \cos \theta \\
  \end{bmatrix}
  \begin{bmatrix}
    p'_x \\
    p'_y \\
  \end{bmatrix}
\end{align} %]]></script>

<p>Thus, we have shown that</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{bmatrix}
    p_x \\
    p_y \\
\end{bmatrix}
=
\overbrace{
\begin{bmatrix}
    \cos \theta && -\sin \theta \\
    \sin \theta && \cos \theta \\
  \end{bmatrix}}^R
\begin{bmatrix}
    p'_x \\
    p'_y \\
\end{bmatrix} %]]></script>

<p>That is, if we have the coordinates of a point in a given frame $b$ and we know the orientation of $b$ with respect to a reference frame $s$, then we can create a rotation matrix $R = [\widehat{x}_b \ \widehat{y}_b]$, where the columns of R are the unit vectors of $b$ as seen in $s$. The matrix R represents a counter-clockwise rotation by an angle $\theta$.</p>

<p><a name="three-dim"></a></p>
<h2 id="orientation-in-3d">Orientation in 3D</h2>

<p>Talk about extending to 3D.</p>

<p>We can derive some very nice properties of this rotation matrix. First, since the columns represent the unit vectors in one system as seen by the other, simply taking the transpose will produce the inverse rotation.</p>

<div class="fig figcenter">
  <img src="/assets/flip.jpg" style="width:500px;" />
</div>

<p>Next, since the columns are unit vectors, then they are pairwise orthogonal. These two properties combine to define the rotation matrix as being orthogonal, $\ie R^T = R^{-1}$.</p>

  </article>

</div>
      </div>
    </div>

    <footer class="site-footer">

  <div class="wrap">

    <div class="footer-col-1 column">
      <ul>
        
        <li>
          <a href="https://github.com/cs336">
            <span class="icon github">
              <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                <path fill-rule="evenodd" clip-rule="evenodd" fill="#C2C2C2" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            <span class="username">cs336</span>
          </a>
        </li>
        
        <li>
          <a href="mailto:"></a>
        </li>
      </ul>
    </div>

    <div class="footer-col-2 column">
        
    </div>

    <div class="footer-col-3 column">
      
    </div>

  </div>

</footer>


    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        // enable automatic line breaks (might look ugly)
        CommonHTML: { linebreaks: { automatic: true } },
        "HTML-CSS": { linebreaks: { automatic: true } },
        SVG: { linebreaks: { automatic: true } },

        // enable $ for inline math -> use \$ for ordinary dollar-sign
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']],
          processEscapes: true
        },
      });
    </script>

    <!-- mathjax -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    </body>
</html>
